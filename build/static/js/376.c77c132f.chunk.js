"use strict";(self.webpackChunkreact_monkey_blogging_boilerplate=self.webpackChunkreact_monkey_blogging_boilerplate||[]).push([[376],{5031:function(e,n,t){t.d(n,{nO:function(){return o},yd:function(){return i},kl:function(){return s}});t(2791);var r=t(184),s=function(e){var n=e.onClick,t=void 0===n?function(){}:n;return(0,r.jsx)("span",{className:"flex items-center justify-center w-10 h-10 border border-gray-200 rounded cursor-pointer",onClick:t,children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})},i=function(e){var n=e.onClick,t=void 0===n?function(){}:n;return(0,r.jsx)("span",{className:"flex items-center justify-center w-10 h-10 border border-gray-200 rounded cursor-pointer",onClick:t,children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})},o=function(e){var n=e.onClick,t=void 0===n?function(){}:n;return(0,r.jsx)("span",{className:"flex items-center justify-center w-10 h-10 border border-gray-200 rounded cursor-pointer",onClick:t,children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})}},6848:function(e,n,t){t.d(n,{_:function(){return h},O:function(){return f}});var r,s,i=t(1413),o=t(4925),c=t(168),a=(t(2791),t(6031)),d=t(184),l=["htmlFor","children"],u=a.ZP.label(r||(r=(0,c.Z)(["\n  color: ",";\n  font-weight: 500;\n  font-size: 14px;\n  cursor: pointer;\n"])),(function(e){return e.theme.gray4b})),h=function(e){var n=e.htmlFor,t=void 0===n?"":n,r=e.children,s=(0,o.Z)(e,l);return(0,d.jsx)(u,(0,i.Z)((0,i.Z)({htmlFor:t},s),{},{children:r}))},x=a.ZP.span(s||(s=(0,c.Z)(["\n  display: inline-block;\n  padding: 10px 15px;\n  border-radius: 8px;\n  font-size: 14px;\n  font-weight: 500;\n"]))),f=function(e){var n=e.children,t=e.type,r="text-gray-500 bg-gray-100";switch(void 0===t?"default":t){case"success":r="text-green-500 bg-green-100";break;case"warning":r="text-orange-500 bg-orange-100";break;case"danger":r="text-red-500 bg-red-100"}return(0,d.jsx)(x,{className:r,children:n})}},1538:function(e,n,t){t.r(n);var r,s=t(168),i=(t(2791),t(6031)),o=t(184),c=i.ZP.div(r||(r=(0,s.Z)(["\n  overflow-x: auto;\n  background-color: white;\n  border-radius: 10px;\n  table {\n    width: 100%;\n  }\n  thead {\n    background-color: #f7f7f8;\n  }\n  th,\n  td {\n    vertical-align: middle;\n    white-space: nowrap;\n  }\n  th {\n    padding: 20px 30px;\n    font-weight: 600;\n    text-align: left;\n  }\n  td {\n    padding: 15px 30px;\n  }\n  tbody {\n  }\n"])));n.default=function(e){var n=e.children;return(0,o.jsx)(c,{children:(0,o.jsx)("table",{children:n})})}},8791:function(e,n,t){t.d(n,{i:function(){return r}});var r=t(1538).default},8322:function(e,n,t){t(2791);var r=t(184);n.Z=function(e){var n=e.title,t=void 0===n?"":n,s=e.desc,i=void 0===s?"":s,o=e.children;return(0,r.jsxs)("div",{className:"mb-10 flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"dashboard-heading",children:t}),(0,r.jsx)("p",{className:"dashboard-short-desc",children:i})]}),o]})}},7376:function(e,n,t){t.r(n);var r=t(3433),s=t(1413),i=t(5861),o=t(9439),c=t(7757),a=t.n(c),d=t(5031),l=t(4167),u=t(6848),h=t(8791),x=t(9808),f=t(1199),p=t(9062),v=t(763),g=t(8322),j=t(2791),m=t(6871),w=t(1830),b=t.n(w),k=t(3585),y=t(184);n.default=function(){var e=(0,j.useState)([]),n=(0,o.Z)(e,2),t=n[0],c=n[1],w=(0,j.useState)(""),N=(0,o.Z)(w,2),Z=N[0],C=N[1],L=(0,j.useState)(),D=(0,o.Z)(L,2),A=D[0],O=D[1],P=(0,j.useState)(0),I=(0,o.Z)(P,2),M=I[0],E=I[1],z=(0,m.s0)(),B=(0,x.a)().userInfo;function S(){return S=(0,i.Z)(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,p.JU)(f.db,"posts",n),b().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){var e=(0,i.Z)(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isConfirmed||(null===B||void 0===B?void 0:B.role)!==k.xZ.ADMIN){e.next=6;break}return e.next=3,(0,p.oe)(t);case 3:b().fire("Deleted!","Your post has been deleted.","success"),e.next=7;break;case 6:b().fire("Failed!","You have no right to delete post","warning");case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}(0,j.useEffect)((function(){function e(){return(e=(0,i.Z)(a().mark((function e(){var n,t,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,p.hJ)(f.db,"posts"),t=Z?(0,p.IO)(n,(0,p.ar)("title",">=",Z),(0,p.ar)("title","<=",Z+"utf8")):(0,p.IO)(n,(0,p.b9)(10)),e.next=4,(0,p.PL)(t);case 4:r=e.sent,i=r.docs[r.docs.length-1],(0,p.cf)(n,(function(e){E(e.size)})),(0,p.cf)(t,(function(e){var n=[];e.forEach((function(e){n.push((0,s.Z)({id:e.id},e.data()))})),c(n)})),O(i);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[Z]);var _=function(e){switch(e){case k.cf.APPROVED:return(0,y.jsx)(u.O,{type:"success",children:"Approved"});case k.cf.PENDING:return(0,y.jsx)(u.O,{type:"warning",children:"Pending"});case k.cf.REJECTED:return(0,y.jsx)(u.O,{type:"danger",children:"Rejected"})}},F=(0,v.debounce)((function(e){C(e.target.value)}),250),J=function(){var e=(0,i.Z)(a().mark((function e(){var n,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,p.IO)((0,p.hJ)(f.db,"posts"),(0,p.TQ)(A||0),(0,p.b9)(10)),(0,p.cf)(n,(function(e){var n=[];e.forEach((function(e){n.push((0,s.Z)({id:e.id},e.data()))})),c([].concat((0,r.Z)(t),n))})),e.next=4,(0,p.PL)(n);case 4:i=e.sent,o=i.docs[i.docs.length-1],O(o);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return B.role!==k.xZ.ADMIN&&B.role!==k.xZ.MOD?null:(0,y.jsxs)("div",{children:[(0,y.jsx)(g.Z,{title:"All posts",desc:"Manage all posts"}),(0,y.jsx)("div",{className:"flex justify-end gap-5 mb-10",children:(0,y.jsx)("div",{className:"w-full max-w-[300px]",children:(0,y.jsx)("input",{type:"text",className:"w-full p-4 border border-gray-300 border-solid rounded-lg",placeholder:"Search post...",onChange:F})})}),(0,y.jsxs)(h.i,{children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{children:"Id"}),(0,y.jsx)("th",{children:"Post"}),(0,y.jsx)("th",{children:"Category"}),(0,y.jsx)("th",{children:"Author"}),(0,y.jsx)("th",{children:"Status"}),(0,y.jsx)("th",{children:"Actions"})]})}),(0,y.jsx)("tbody",{children:t.length>0&&t.map((function(e){var n,t,r,s,i,o=null!==e&&void 0!==e&&null!==(n=e.createdAt)&&void 0!==n&&n.seconds?new Date(1e3*(null===e||void 0===e||null===(t=e.createdAt)||void 0===t?void 0:t.seconds)):new Date,c=new Date(o).toLocaleDateString("vi-VI");return(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{children:(null===(r=e.id)||void 0===r?void 0:r.slice(0,5))+"..."}),(0,y.jsx)("td",{className:"!pr-[100px]",children:(0,y.jsxs)("div",{className:"flex items-center gap-x-3",children:[(0,y.jsx)("img",{src:e.image,alt:"",className:"w-[66px] h-[55px] rounded object-cover"}),(0,y.jsxs)("div",{className:"flex-1",children:[(0,y.jsx)("h3",{className:"font-semibold",children:e.title}),(0,y.jsxs)("time",{className:"text-sm text-gray-500",children:["Date: ",c]})]})]})}),(0,y.jsx)("td",{children:(0,y.jsx)("span",{className:"text-gray-500",children:null===(s=e.category)||void 0===s?void 0:s.name})}),(0,y.jsx)("td",{children:(0,y.jsx)("span",{className:"text-gray-500",children:null===(i=e.user)||void 0===i?void 0:i.username})}),(0,y.jsx)("td",{children:_(e.status)}),(0,y.jsx)("td",{children:(0,y.jsxs)("div",{className:"flex items-center text-gray-500 gap-x-3",children:[(0,y.jsx)(d.kl,{onClick:function(){return z("/".concat(e.slug))}}),(0,y.jsx)(d.yd,{onClick:function(){return z("/manage/update-post?id=".concat(e.id))}}),(0,y.jsx)(d.nO,{onClick:function(){return function(e){return S.apply(this,arguments)}(e.id)}})]})})]},e.id)}))})]}),M>t.length&&(0,y.jsx)("div",{className:"mt-10 text-center",children:(0,y.jsx)(l.z,{className:"mx-auto w-[200px]",onClick:J,children:"Load more"})})]})}}}]);
//# sourceMappingURL=376.c77c132f.chunk.js.map