"use strict";(self.webpackChunkreact_monkey_blogging_boilerplate=self.webpackChunkreact_monkey_blogging_boilerplate||[]).push([[135],{5456:function(e,n,r){r.d(n,{Y:function(){return i}});r(2791);var t=r(184),a=r(1413),l=r(4925),o=r(1134),s=["checked","children","control","name"],i=function(e){var n=e.checked,r=e.children,i=e.control,c=e.name,d=(0,l.Z)(e,s),u=(0,o.bc)({control:i,name:c,defaultValue:""}).field;return(0,t.jsxs)("label",{children:[(0,t.jsx)("input",(0,a.Z)((0,a.Z)({checked:n,type:"radio",className:"hidden-input"},u),d)),(0,t.jsxs)("div",{className:"flex items-center gap-x-3 font-medium cursor-pointer",children:[(0,t.jsx)("div",{className:"w-7 h-7 rounded-full border flex items-center justify-center p-1  ".concat(n?"bg-primary border-primary text-white":"border-gray-200 text-transparent"),children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),(0,t.jsx)("span",{children:r})]})]})}},9248:function(e,n,r){r.d(n,{g:function(){return i},Y:function(){return c}});var t,a=r(168),l=(r(2791),r(6031)),o=r(184),s=l.ZP.div(t||(t=(0,a.Z)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  row-gap: 10px;\n  margin-bottom: 25px;\n"]))),i=function(e){var n=e.children;return(0,o.jsx)(s,{children:n})},c=function(e){var n=e.children;return(0,o.jsx)("div",{className:"flex flex-wrap gap-5",children:n})}},3031:function(e,n,r){var t=r(1413),a=r(4925),l=r(2791),o=r(184),s=["name","className","progress","image","handleDeleteImage"];n.Z=function(e){var n=e.name,r=e.className,i=void 0===r?"":r,c=e.progress,d=void 0===c?0:c,u=e.image,m=void 0===u?"":u,h=e.handleDeleteImage,x=void 0===h?function(){}:h,p=(0,a.Z)(e,s);return(0,o.jsxs)("label",{className:"cursor-pointer flex items-center justify-center border border-dashed w-full min-h-[200px] rounded-lg ".concat(i," relative overflow-hidden group"),children:[(0,o.jsx)("input",(0,t.Z)({type:"file",name:n,className:"hidden-input",onChange:function(){}},p)),0!==d&&!m&&(0,o.jsx)("div",{className:"absolute z-10 w-16 h-16 border-8 border-green-500 rounded-full loading border-t-transparent animate-spin"}),!m&&0===d&&(0,o.jsxs)("div",{className:"flex flex-col items-center text-center pointer-events-none",children:[(0,o.jsx)("img",{src:"/img-upload.png",alt:"upload-img",className:"max-w-[80px] mb-5"}),(0,o.jsx)("p",{className:"font-semibold",children:"Choose photo"})]}),m&&(0,o.jsxs)(l.Fragment,{children:[(0,o.jsx)("img",{src:m,className:"object-cover w-full h-full",alt:""}),(0,o.jsx)("button",{type:"button",className:"absolute z-10 flex items-center justify-center invisible w-16 h-16 text-red-500 transition-all bg-white rounded-full opacity-0 cursor-pointer group-hover:opacity-100 group-hover:visible",onClick:x,children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),!m&&(0,o.jsx)("div",{className:"absolute bottom-0 left-0 w-10 h-1 transition-all bg-green-400 image-upload-progress",style:{width:"".concat(Math.ceil(d),"%")}})]})}},3175:function(e,n,r){var t,a=r(1413),l=r(4925),o=r(168),s=(r(2791),r(6031)),i=r(1134),c=r(184),d=["name","type","children","control"],u=s.ZP.div(t||(t=(0,o.Z)(["\n  position: relative;\n  width: 100%;\n  input {\n    width: 100%;\n    padding: ",";\n    background-color: transparent;\n    border: 1px solid ",";\n    border-radius: 8px;\n    transition: all 0.2s linear;\n    color: ",";\n    font-size: 14px;\n  }\n  input::-webkit-input-placeholder {\n    color: #b2b3bd;\n  }\n  input::-moz-input-placeholder {\n    color: #b2b3bd;\n  }\n  .input-icon {\n    position: absolute;\n    right: 20px;\n    top: 50%;\n    transform: translateY(-50%);\n    cursor: pointer;\n  }\n"])),(function(e){return e.hasIcon?"16px 60px 16px 20px":"16px 20px"}),(function(e){return e.theme.grayf1}),(function(e){return e.theme.black}));n.Z=function(e){var n=e.name,r=void 0===n?"":n,t=e.type,o=void 0===t?"text":t,s=e.children,m=e.control,h=(0,l.Z)(e,d),x=(0,i.bc)({control:m,name:r,defaultValue:""}).field;return(0,c.jsxs)(u,{hasIcon:!!s,children:[(0,c.jsx)("input",(0,a.Z)((0,a.Z)({id:r,type:o},x),h)),s?(0,c.jsx)("div",{className:"input-icon",children:s}):null]})}},3117:function(e,n,r){r.d(n,{I:function(){return t.Z}});var t=r(3175)},6848:function(e,n,r){r.d(n,{_:function(){return m},O:function(){return x}});var t,a,l=r(1413),o=r(4925),s=r(168),i=(r(2791),r(6031)),c=r(184),d=["htmlFor","children"],u=i.ZP.label(t||(t=(0,s.Z)(["\n  color: ",";\n  font-weight: 500;\n  font-size: 14px;\n  cursor: pointer;\n"])),(function(e){return e.theme.gray4b})),m=function(e){var n=e.htmlFor,r=void 0===n?"":n,t=e.children,a=(0,o.Z)(e,d);return(0,c.jsx)(u,(0,l.Z)((0,l.Z)({htmlFor:r},a),{},{children:t}))},h=i.ZP.span(a||(a=(0,s.Z)(["\n  display: inline-block;\n  padding: 10px 15px;\n  border-radius: 8px;\n  font-size: 14px;\n  font-weight: 500;\n"]))),x=function(e){var n=e.children,r=e.type,t="text-gray-500 bg-gray-100";switch(void 0===r?"default":r){case"success":t="text-green-500 bg-green-100";break;case"warning":t="text-orange-500 bg-orange-100";break;case"danger":t="text-red-500 bg-red-100"}return(0,c.jsx)(h,{className:t,children:n})}},1776:function(e,n,r){r.d(n,{Z:function(){return d}});var t=r(9439),a=r(9808),l=r(4453),o=r(2791),s=r(1830),i=r.n(s),c=r(3585);function d(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,d=(0,a.a)(),u=d.userInfo,m=(0,o.useState)(0),h=(0,t.Z)(m,2),x=h[0],p=h[1],f=(0,o.useState)(""),g=(0,t.Z)(f,2),v=g[0],b=g[1];if(e&&n){var j=function(e){if((null===u||void 0===u?void 0:u.role)===c.xZ.ADMIN||(null===u||void 0===u?void 0:u.role)===c.xZ.MOD||(null===u||void 0===u?void 0:u.role)===c.xZ.USER){var n=(0,l.cF)(),r=(0,l.iH)(n,"images/"+e.name),t=(0,l.B0)(r,e);t.on("state_changed",(function(e){var n=e.bytesTransferred/e.totalBytes*100;switch(p(n),e.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running");break;default:console.log("Nothing at all")}}),(function(e){console.log("Error"),b("")}),(function(){(0,l.Jt)(t.snapshot.ref).then((function(e){console.log("File available at",e),b(e)}))}))}else i().fire("Failed","You have no right to do this action","warning")},w=function(n){var r=n.target.files[0];r&&(e("image_name",r.name),j(r))},N=function(){if((null===u||void 0===u?void 0:u.role)===c.xZ.ADMIN||(null===u||void 0===u?void 0:u.role)===c.xZ.MOD){var e=(0,l.cF)(),t=(0,l.iH)(e,"images/"+(r||n("image_name")));(0,l.oq)(t).then((function(){console.log("Remove image successfully"),b(""),p(0),s&&s()})).catch((function(e){console.log("handleDeleteImage ~ error",e),console.log("Can not delete image"),b("")}))}else i().fire("Failed","You have no right to do this action","warning")},Z=function(){b(""),p(0)};return{image:v,setImage:b,handleResetUpload:Z,progress:x,handleSelectImage:w,handleDeleteImage:N}}}},8322:function(e,n,r){r(2791);var t=r(184);n.Z=function(e){var n=e.title,r=void 0===n?"":n,a=e.desc,l=void 0===a?"":a,o=e.children;return(0,t.jsxs)("div",{className:"mb-10 flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"dashboard-heading",children:r}),(0,t.jsx)("p",{className:"dashboard-short-desc",children:l})]}),o]})}},2135:function(e,n,r){r.r(n);var t=r(5861),a=r(7757),l=r.n(a),o=r(4167),s=r(5456),i=r(9248),c=r(3031),d=r(3117),u=r(6848),m=r(8322),h=(r(2791),r(1134)),x=r(3585),p=r(1776),f=r(289),g=r(1199),v=r(9062),b=r(333),j=r.n(b),w=r(577),N=r(9808),Z=r(1830),y=r.n(Z),k=r(184);n.default=function(){var e=(0,h.cI)({mode:"onChange",defaultValues:{fullname:"",email:"",password:"",username:"",avatar:"",status:x.iQ.ACTIVE,role:x.xZ.USER,createdAt:new Date}}),n=e.control,r=e.handleSubmit,a=e.setValue,b=e.watch,Z=e.getValues,I=e.formState,A=I.isValid,D=I.isSubmitting,E=e.reset,C=(0,p.Z)(a,Z),_=C.image,M=C.handleResetUpload,S=C.progress,Y=C.handleSelectImage,F=C.handleDeleteImage,U=(0,N.a)().userInfo,V=function(){var e=(0,t.Z)(l().mark((function e(n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A){e.next=2;break}return e.abrupt("return");case 2:if((null===U||void 0===U?void 0:U.role)===x.xZ.ADMIN){e.next=5;break}return y().fire("Failed","You have no right to do this action","warning"),e.abrupt("return");case 5:return e.prev=5,e.next=8,(0,f.Xb)(g.I,n.email,n.password);case 8:return e.next=10,(0,v.ET)((0,v.hJ)(g.db,"users"),{fullname:n.fullname,email:n.email,password:n.password,username:j()(n.username||n.fullname,{lower:!0,replacement:" ",trim:!0}),avatar:_,status:Number(n.status),role:Number(n.role),createdAt:(0,v.Bt)()});case 10:w.Am.success("Create new user with email: ".concat(n.email," successfully!")),E({fullname:"",email:"",password:"",username:"",avatar:"",status:x.iQ.ACTIVE,role:x.xZ.USER,createdAt:new Date}),M(),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(5),console.log(e.t0),w.Am.error("Can not create new user");case 19:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(n){return e.apply(this,arguments)}}(),R=b("status"),B=b("role");return(0,k.jsxs)("div",{children:[(0,k.jsx)(m.Z,{title:"New user",desc:"Add new user to system"}),(0,k.jsxs)("form",{onSubmit:r(V),children:[(0,k.jsx)("div",{className:"w-[200px] h-[200px] mx-auto rounded-full mb-10",children:(0,k.jsx)(c.Z,{className:"!rounded-full h-full",onChange:Y,handleDeleteImage:F,progress:S,image:_})}),(0,k.jsxs)("div",{className:"form-layout",children:[(0,k.jsxs)(i.g,{children:[(0,k.jsx)(u._,{children:"Fullname"}),(0,k.jsx)(d.I,{name:"fullname",placeholder:"Enter your fullname",control:n})]}),(0,k.jsxs)(i.g,{children:[(0,k.jsx)(u._,{children:"Username"}),(0,k.jsx)(d.I,{name:"username",placeholder:"Enter your username",control:n})]})]}),(0,k.jsxs)("div",{className:"form-layout",children:[(0,k.jsxs)(i.g,{children:[(0,k.jsx)(u._,{children:"Email"}),(0,k.jsx)(d.I,{name:"email",placeholder:"Enter your email",control:n,type:"email"})]}),(0,k.jsxs)(i.g,{children:[(0,k.jsx)(u._,{children:"Password"}),(0,k.jsx)(d.I,{name:"password",placeholder:"Enter your password",control:n,type:"password"})]})]}),(0,k.jsxs)("div",{className:"form-layout",children:[(0,k.jsxs)(i.g,{children:[(0,k.jsx)(u._,{children:"Status"}),(0,k.jsxs)(i.Y,{children:[(0,k.jsx)(s.Y,{name:"status",control:n,checked:Number(R)===x.iQ.ACTIVE,value:x.iQ.ACTIVE,children:"Active"}),(0,k.jsx)(s.Y,{name:"status",control:n,checked:Number(R)===x.iQ.PENDING,value:x.iQ.PENDING,children:"Pending"}),(0,k.jsx)(s.Y,{name:"status",control:n,checked:Number(R)===x.iQ.BAN,value:x.iQ.BAN,children:"Banned"})]})]}),(0,k.jsxs)(i.g,{children:[(0,k.jsx)(u._,{children:"Role"}),(0,k.jsxs)(i.Y,{children:[(0,k.jsx)(s.Y,{name:"role",control:n,checked:Number(B)===x.xZ.ADMIN,value:x.xZ.ADMIN,children:"Admin"}),(0,k.jsx)(s.Y,{name:"role",control:n,checked:Number(B)===x.xZ.MOD,value:x.xZ.MOD,children:"Moderator"}),(0,k.jsx)(s.Y,{name:"role",control:n,checked:Number(B)===x.xZ.USER,value:x.xZ.USER,children:"User"})]})]})]}),(0,k.jsx)(o.z,{kind:"primary",type:"submit",className:"mx-auto w-[200px]",isLoading:D,disabled:D,children:"Add new user"})]})]})}}}]);
//# sourceMappingURL=135.20c0838e.chunk.js.map