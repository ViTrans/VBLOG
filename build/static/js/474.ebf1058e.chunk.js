"use strict";(self.webpackChunkreact_monkey_blogging_boilerplate=self.webpackChunkreact_monkey_blogging_boilerplate||[]).push([[474],{6474:function(e,n,t){t.r(n),t.d(n,{default:function(){return Z}});var r=t(3433),s=t(1413),c=t(5861),i=t(9439),o=t(7757),a=t.n(o),u=t(5031),d=t(4167),l=t(6848),h=t(8791),f=t(2791),x=t(184),p=function(e){var n=e.onClick,t=void 0===n?function(){}:n;return(0,x.jsx)("span",{className:"flex items-center justify-center w-10 h-10 border border-gray-200 rounded cursor-pointer",onClick:t,children:(0,x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})},g=t(7823),j=t(9062),m=t(8322),v=t(3585),b=t(1830),k=t.n(b),y=t(6871),w=t(763),C=t(9808),Z=function(){var e=(0,f.useState)([]),n=(0,i.Z)(e,2),t=n[0],o=n[1],b=(0,y.s0)(),Z=(0,f.useState)(void 0),N=(0,i.Z)(Z,2),O=N[0],A=N[1],I=(0,f.useState)(),L=(0,i.Z)(I,2),S=L[0],D=L[1],M=(0,f.useState)(0),P=(0,i.Z)(M,2),_=P[0],z=P[1],B=function(){var e=(0,c.Z)(a().mark((function e(){var n,c,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,j.IO)((0,j.hJ)(g.db,"categories"),(0,j.TQ)(S||0),(0,j.b9)(10)),(0,j.cf)(n,(function(e){var n=[];e.forEach((function(e){n.push((0,s.Z)({id:e.id},e.data()))})),o([].concat((0,r.Z)(t),n))})),e.next=4,(0,j.PL)(n);case 4:c=e.sent,i=c.docs[c.docs.length-1],D(i);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,f.useEffect)((function(){function e(){return(e=(0,c.Z)(a().mark((function e(){var n,t,r,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,j.hJ)(g.db,"categories"),t=O?(0,j.IO)(n,(0,j.ar)("name","==",O)):(0,j.IO)(n,(0,j.b9)(10)),e.next=4,(0,j.PL)(t);case 4:r=e.sent,c=r.docs[r.docs.length-1],(0,j.cf)(n,(function(e){z(e.size)})),(0,j.cf)(t,(function(e){var n=[];e.forEach((function(e){n.push((0,s.Z)({id:e.id},e.data()))})),o(n)})),D(c);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[O]);var E=(0,C.a)().userInfo,Y=function(){var e=(0,c.Z)(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===E||void 0===E?void 0:E.role)===v.xZ.ADMIN){e.next=3;break}return k().fire("Failed","You have no right to do this action","warning"),e.abrupt("return");case 3:t=(0,j.JU)(g.db,"categories",n),k().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){var e=(0,c.Z)(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isConfirmed){e.next=4;break}return e.next=3,(0,j.oe)(t);case 3:k().fire("Deleted!","Your file has been deleted.","success");case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),J=(0,w.debounce)((function(e){A(e.target.value)}),500);return E.role!==v.xZ.ADMIN&&E.role!==v.xZ.MOD?null:(0,x.jsxs)("div",{children:[(0,x.jsx)(m.Z,{title:"Categories",desc:"Manage your category",children:(0,x.jsx)(d.z,{kind:"ghost",height:"60px",to:"/manage/add-category",children:"Create category"})}),(0,x.jsx)("div",{className:"flex justify-end mb-10",children:(0,x.jsx)("input",{type:"text",placeholder:"Search category...",className:"px-5 py-4 border border-gray-300 rounded-lg outline-none",onChange:J})}),(0,x.jsxs)(h.i,{children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{children:"Id"}),(0,x.jsx)("th",{children:"Name"}),(0,x.jsx)("th",{children:"Slug"}),(0,x.jsx)("th",{children:"Status"}),(0,x.jsx)("th",{children:"Actions"})]})}),(0,x.jsx)("tbody",{children:t.length>0&&t.map((function(e){return(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:e.id}),(0,x.jsx)("td",{children:e.name}),(0,x.jsx)("td",{children:(0,x.jsx)("span",{className:"italic text-gray-400",children:e.slug})}),(0,x.jsxs)("td",{children:[Number(e.status)===v.bk.APPROVED&&(0,x.jsx)(l.O,{type:"success",children:"Approved"}),Number(e.status)===v.bk.UNAPPROVED&&(0,x.jsx)(l.O,{type:"warning",children:"Unapproved"})]}),(0,x.jsx)("td",{children:(0,x.jsxs)("div",{className:"flex items-center text-gray-500 gap-x-3",children:[(0,x.jsx)(p,{onClick:function(){return b("/category/".concat(e.slug))}}),(0,x.jsx)(u.yd,{onClick:function(){return b("/manage/update-category?id=".concat(e.id))}}),(0,x.jsx)(u.nO,{onClick:function(){return Y(e.id)}})]})})]},e.id)}))})]}),_>t.length&&(0,x.jsxs)("div",{className:"mt-10",children:[(0,x.jsx)(d.z,{onClick:B,className:"mx-auto",children:"Load more"}),_]})]})}}}]);
//# sourceMappingURL=474.ebf1058e.chunk.js.map