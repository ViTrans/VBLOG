"use strict";(self.webpackChunkreact_monkey_blogging_boilerplate=self.webpackChunkreact_monkey_blogging_boilerplate||[]).push([[462],{6462:function(e,n,r){r.r(n),r.d(n,{default:function(){return k}});var t=r(4167),s=r(9808),i=r(8322),c=r(2791),d=r(3585),a=r(5861),l=r(1413),u=r(9439),o=r(7757),h=r.n(o),x=r(5031),f=r(6848),j=r(8791),v=r(7823),m=r(9062),p=r(6871),g=r(577),b=r(1830),w=r.n(b),y=r(184),N=function(){var e=(0,c.useState)([]),n=(0,u.Z)(e,2),r=n[0],t=n[1],i=(0,p.s0)();(0,c.useEffect)((function(){var e=(0,m.hJ)(v.db,"users");(0,m.cf)(e,(function(e){var n=[];e.forEach((function(e){n.push((0,l.Z)({id:e.id},e.data()))})),t(n)}))}),[]);var o=function(e){switch(e){case d.xZ.ADMIN:return"Admin";case d.xZ.MOD:return"Moderator";case d.xZ.USER:return"User"}},b=function(e){switch(e){case d.iQ.ACTIVE:return(0,y.jsx)(f.O,{type:"success",children:"Active"});case d.iQ.PENDING:return(0,y.jsx)(f.O,{type:"warning",children:"Pending"});case d.iQ.BAN:return(0,y.jsx)(f.O,{type:"danger",children:"Rejected"})}},N=(0,s.a)().userInfo,k=function(){var e=(0,a.Z)(h().mark((function e(n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===N||void 0===N?void 0:N.role)===d.xZ.ADMIN){e.next=3;break}return w().fire("Failed","You have no right to do this action","warning"),e.abrupt("return");case 3:r=(0,m.JU)(v.db,"users",n.id),w().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){var e=(0,a.Z)(h().mark((function e(n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isConfirmed){e.next=5;break}return e.next=3,(0,m.oe)(r);case 3:g.Am.success("Delete user successfully"),w().fire("Deleted!","The user has been deleted.","success");case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,y.jsx)("div",{children:(0,y.jsxs)(j.i,{children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{children:"Id"}),(0,y.jsx)("th",{children:"Info"}),(0,y.jsx)("th",{children:"Username"}),(0,y.jsx)("th",{children:"Email address"}),(0,y.jsx)("th",{children:"Status"}),(0,y.jsx)("th",{children:"Role"}),(0,y.jsx)("th",{children:"Actions"})]})}),(0,y.jsx)("tbody",{children:r.length>0&&r.map((function(e){return function(e){var n;return(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{title:e.id,children:e.id.slice(0,5)+"..."}),(0,y.jsx)("td",{className:"whitespace-nowrap",children:(0,y.jsxs)("div",{className:"flex items-center gap-x-3",children:[(0,y.jsx)("img",{src:null===e||void 0===e?void 0:e.avatar,alt:"",className:"flex-shrink-0 object-cover w-10 h-10 rounded-md"}),(0,y.jsxs)("div",{className:"flex-1",children:[(0,y.jsx)("h3",{children:null===e||void 0===e?void 0:e.fullname}),(0,y.jsx)("time",{className:"text-sm text-gray-300",children:new Date(1e3*(null===e||void 0===e||null===(n=e.createdAt)||void 0===n?void 0:n.seconds)).toLocaleDateString("vi-VI")})]})]})}),(0,y.jsx)("td",{children:null===e||void 0===e?void 0:e.username}),(0,y.jsx)("td",{children:(null===e||void 0===e?void 0:e.email.slice(0,5))+"..."}),(0,y.jsx)("td",{children:b(Number(null===e||void 0===e?void 0:e.status))}),(0,y.jsx)("td",{children:o(Number(e.role))}),(0,y.jsx)("td",{children:(0,y.jsxs)("div",{className:"flex items-center text-gray-500 gap-x-3",children:[(0,y.jsx)(x.yd,{onClick:function(){return i("/manage/update-user?id=".concat(e.id))}}),(0,y.jsx)(x.nO,{onClick:function(){return k(e)}})]})})]},e.id)}(e)}))})]})})},k=function(){return(0,s.a)().userInfo.role!==d.xZ.ADMIN?null:(0,y.jsxs)("div",{children:[(0,y.jsx)(i.Z,{title:"Users",desc:"Manage your user"}),(0,y.jsx)("div",{className:"flex justify-end mb-10",children:(0,y.jsx)(t.z,{kind:"ghost",to:"/manage/add-user",children:"Add new user"})}),(0,y.jsx)(N,{})]})}}}]);
//# sourceMappingURL=462.c523380a.chunk.js.map